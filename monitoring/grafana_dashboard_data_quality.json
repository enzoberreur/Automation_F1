{
  "dashboard": {
    "id": null,
    "title": "Ferrari F1 - Data Quality",
    "tags": ["data-quality","dq","ferrari"],
    "schemaVersion": 30,
    "version": 1,
    "time": { "from": "now-30m", "to": "now" },
    "templating": { "list": [ { "type": "interval", "name": "dq_window", "label": "Window", "query": "5m,15m,30m,1h", "current": { "text": "15m", "value": "15m" } } ] },
    "panels": [
      { "id": 1, "type": "table", "title": "Freshness (seconds since last sample)", "gridPos": { "h": 4, "w": 12, "x": 0, "y": 0 }, "datasource": "Prometheus", "targets": [ { "expr": "time() - timestamp(ferrari_simulator_current_throughput_msg_per_sec)", "refId": "A", "format": "table" }, { "expr": "time() - timestamp(ferrari_simulator_engine_temp_celsius)", "refId": "B", "format": "table" } ] },
      { "id": 2, "type": "stat", "title": "Missing metrics (count)", "gridPos": { "h": 3, "w": 6, "x": 12, "y": 0 }, "datasource": "Prometheus", "targets": [ { "expr": "absent(ferrari_simulator_current_throughput_msg_per_sec)", "refId": "A" } ] },
      { "id": 3, "type": "timeseries", "title": "Engine Temp z-score (alerts on >3)", "gridPos": { "h": 4, "w": 12, "x": 0, "y": 4 }, "datasource": "Prometheus", "targets": [ { "expr": "(ferrari_simulator_engine_temp_celsius - avg_over_time(ferrari_simulator_engine_temp_celsius[30m])) / stddev_over_time(ferrari_simulator_engine_temp_celsius[30m])", "refId": "A" } ] },
      { "id": 4, "type": "stat", "title": "Cardinality (distinct cars)", "gridPos": { "h": 3, "w": 6, "x": 12, "y": 4 }, "datasource": "Prometheus", "targets": [ { "expr": "count(count by (car_id) (ferrari_pitstop_score))", "refId": "A" } ] },
      { "id": 5, "type": "table", "title": "Counter resets (1h)", "gridPos": { "h": 4, "w": 12, "x": 0, "y": 8 }, "datasource": "Prometheus", "targets": [ { "expr": "resets(ferrari_simulator_messages_sent_total[1h])", "refId": "A", "format": "table" } ] },
      { "id": 6, "type": "timeseries", "title": "Latency distribution (heatmap)", "gridPos": { "h": 6, "w": 12, "x": 12, "y": 8 }, "datasource": "Prometheus", "targets": [ { "expr": "sum(rate(ferrari_simulator_send_latency_seconds_bucket[$dq_window])) by (le)", "refId": "A" } ] }
    ]
  },
  "overwrite": true
}
